'use strict';function _0x5c18(){const _0x536cc5=['user','mineApps','demoData','customApp','typeorm','已将应用加入到我的个人工作台！','439KEWeTE','修改成功','删除应用成功！','7qySizu','getOwnPropertyDescriptor','HttpStatus','155076WArluC','30lPCseN','该分类下存在App，不可删除！','./userApps.entity','appEntity','该应用已被用户关联使用中，不可删除！','queryOneCat','删除成功','save','UserAppsEntity','appCatsEntity','缺失必要参数！','catId','__esModule','@nestjs/common','__param','InjectRepository','decorate','userId','该分类不存在！','object','catName','appRole','function','该分类名称已存在！','appId','count','3489780eWcqKF','__decorate','status','Repository','1000cLKvSt','find','__metadata','3378807MiHGrN','439293HPXKUj','HttpException','design:paramtypes','7260VuJRow','updateAppCats','findOne','affected','includes','8QgPcww','修改App信息失败！','frontAppList','3125322jCLqVc','AppEntity','17676ANMDuT','MoreThan','DESC','appCount','delApp','AppService','collect','map','role','des','应用审核拒绝完成','修改失败！','该应用不存在！','update','您正在编辑一个不存在的应用！','./appCats.entity','forEach','该应用名称已存在！','删除App成功','Not','createApp','您正在操作一个不存在的资源！','AppCatsEntity','length','updateApp','findAndCount','Like','super','删除App失败！','preset','appName','metadata','BAD_REQUEST','delete','取消收藏成功!','defineProperty','split','system','修改App信息成功','name','userAppsEntity'];_0x5c18=function(){return _0x536cc5;};return _0x5c18();}function _0x37f6(_0x3d8ef9,_0xbe43b4){const _0x5c18cc=_0x5c18();return _0x37f6=function(_0x37f6fe,_0x202429){_0x37f6fe=_0x37f6fe-0x184;let _0x5ab08e=_0x5c18cc[_0x37f6fe];return _0x5ab08e;},_0x37f6(_0x3d8ef9,_0xbe43b4);}const _0x5e075a=_0x37f6;(function(_0x23279e,_0x167f8f){const _0x253cb2=_0x37f6,_0x2af096=_0x23279e();while(!![]){try{const _0x360d66=parseInt(_0x253cb2(0x19c))/0x1*(parseInt(_0x253cb2(0x1c1))/0x2)+-parseInt(_0x253cb2(0x1c5))/0x3+-parseInt(_0x253cb2(0x1a2))/0x4*(-parseInt(_0x253cb2(0x1a3))/0x5)+parseInt(_0x253cb2(0x1d0))/0x6*(parseInt(_0x253cb2(0x19f))/0x7)+-parseInt(_0x253cb2(0x1cd))/0x8*(-parseInt(_0x253cb2(0x1c4))/0x9)+parseInt(_0x253cb2(0x1bd))/0xa+-parseInt(_0x253cb2(0x1c8))/0xb*(parseInt(_0x253cb2(0x1d2))/0xc);if(_0x360d66===_0x167f8f)break;else _0x2af096['push'](_0x2af096['shift']());}catch(_0x4300c0){_0x2af096['push'](_0x2af096['shift']());}}}(_0x5c18,0x8d4e7));var __decorate=this&&this[_0x5e075a(0x1be)]||function(_0x4fc3fe,_0x1685b3,_0x316433,_0xe048ac){const _0x5b3ce0=_0x5e075a;var _0x137428=arguments[_0x5b3ce0(0x184)],_0x20fe03=_0x137428<0x3?_0x1685b3:_0xe048ac===null?_0xe048ac=Object[_0x5b3ce0(0x1a0)](_0x1685b3,_0x316433):_0xe048ac,_0x26dc6a;if(typeof Reflect===_0x5b3ce0(0x1b6)&&typeof Reflect[_0x5b3ce0(0x1b3)]==='function')_0x20fe03=Reflect[_0x5b3ce0(0x1b3)](_0x4fc3fe,_0x1685b3,_0x316433,_0xe048ac);else{for(var _0x54be45=_0x4fc3fe[_0x5b3ce0(0x184)]-0x1;_0x54be45>=0x0;_0x54be45--)if(_0x26dc6a=_0x4fc3fe[_0x54be45])_0x20fe03=(_0x137428<0x3?_0x26dc6a(_0x20fe03):_0x137428>0x3?_0x26dc6a(_0x1685b3,_0x316433,_0x20fe03):_0x26dc6a(_0x1685b3,_0x316433))||_0x20fe03;}return _0x137428>0x3&&_0x20fe03&&Object[_0x5b3ce0(0x190)](_0x1685b3,_0x316433,_0x20fe03),_0x20fe03;},__metadata=this&&this[_0x5e075a(0x1c3)]||function(_0x5436d8,_0x4535b8){const _0x8dc45d=_0x5e075a;if(typeof Reflect===_0x8dc45d(0x1b6)&&typeof Reflect[_0x8dc45d(0x18c)]===_0x8dc45d(0x1b9))return Reflect[_0x8dc45d(0x18c)](_0x5436d8,_0x4535b8);},__param=this&&this[_0x5e075a(0x1b1)]||function(_0x1a854b,_0x20e19c){return function(_0x1070de,_0x2db4b5){_0x20e19c(_0x1070de,_0x2db4b5,_0x1a854b);};};Object[_0x5e075a(0x190)](exports,_0x5e075a(0x1af),{'value':!![]}),exports[_0x5e075a(0x1d7)]=void 0x0;const common_1=require(_0x5e075a(0x1b0)),appCats_entity_1=require(_0x5e075a(0x1e1)),typeorm_1=require(_0x5e075a(0x19a)),typeorm_2=require('@nestjs/typeorm'),app_entity_1=require('./app.entity'),userApps_entity_1=require(_0x5e075a(0x1a5));let AppService=class AppService{constructor(_0x577cc9,_0x2f082d,_0x55b4f6){const _0x459e59=_0x5e075a;this[_0x459e59(0x1ac)]=_0x577cc9,this['appEntity']=_0x2f082d,this[_0x459e59(0x195)]=_0x55b4f6;}async['createAppCat'](_0x2450f9){const _0xc94e58=_0x5e075a,{name:_0x3b1892}=_0x2450f9,_0x4b423b=await this[_0xc94e58(0x1ac)]['findOne']({'where':{'name':_0x3b1892}});if(_0x4b423b)throw new common_1[(_0xc94e58(0x1c6))](_0xc94e58(0x1ba),common_1['HttpStatus'][_0xc94e58(0x18d)]);return await this[_0xc94e58(0x1ac)][_0xc94e58(0x1aa)](_0x2450f9);}async['delAppCat'](_0x52c662){const _0x424a37=_0x5e075a,{id:_0x5976e4}=_0x52c662,_0x307409=await this[_0x424a37(0x1ac)][_0x424a37(0x1ca)]({'where':{'id':_0x5976e4}});if(!_0x307409)throw new common_1[(_0x424a37(0x1c6))](_0x424a37(0x1b5),common_1['HttpStatus'][_0x424a37(0x18d)]);const _0x1e9c9c=await this[_0x424a37(0x1a6)]['count']({'where':{'catId':_0x5976e4}});if(_0x1e9c9c>0x0)throw new common_1[(_0x424a37(0x1c6))](_0x424a37(0x1a4),common_1[_0x424a37(0x1a1)][_0x424a37(0x18d)]);const _0x5163b3=await this[_0x424a37(0x1ac)]['delete'](_0x5976e4);if(_0x5163b3[_0x424a37(0x1cb)]>0x0)return _0x424a37(0x1a9);throw new common_1[(_0x424a37(0x1c6))]('删除失败！',common_1[_0x424a37(0x1a1)][_0x424a37(0x18d)]);}async[_0x5e075a(0x1c9)](_0x3d7176){const _0x488a30=_0x5e075a,{id:_0x2423c0,name:_0x30211a}=_0x3d7176,_0x1a4c9d=await this['appCatsEntity'][_0x488a30(0x1ca)]({'where':{'name':_0x30211a,'id':(0x0,typeorm_1['Not'])(_0x2423c0)}});if(_0x1a4c9d)throw new common_1[(_0x488a30(0x1c6))](_0x488a30(0x1ba),common_1[_0x488a30(0x1a1)][_0x488a30(0x18d)]);const _0x25f912=await this[_0x488a30(0x1ac)][_0x488a30(0x1df)]({'id':_0x2423c0},_0x3d7176);if(_0x25f912['affected']>0x0)return _0x488a30(0x19d);throw new common_1[(_0x488a30(0x1c6))]('修改失败！',common_1[_0x488a30(0x1a1)]['BAD_REQUEST']);}async[_0x5e075a(0x1a8)](_0x2e4c48){const _0x2e8445=_0x5e075a,{id:_0x541ee7}=_0x2e4c48;if(!_0x541ee7)throw new common_1[(_0x2e8445(0x1c6))](_0x2e8445(0x1ad),common_1['HttpStatus'][_0x2e8445(0x18d)]);const _0x24a56c=await this[_0x2e8445(0x1a6)][_0x2e8445(0x1ca)]({'where':{'id':_0x541ee7}}),{demoData:_0x370b97,coverImg:_0x62522f,des:_0x4ee675,name:_0x18c7fc}=_0x24a56c;return{'demoData':_0x370b97?_0x370b97[_0x2e8445(0x191)]('\x0a'):[],'coverImg':_0x62522f,'des':_0x4ee675,'name':_0x18c7fc};}async['appCatsList'](_0x1d7fa5){const _0x4a8b37=_0x5e075a,{page:page=0x1,size:size=0xa,name:_0x62c748,status:_0x537924}=_0x1d7fa5,_0x55eafb={};_0x62c748&&(_0x55eafb[_0x4a8b37(0x194)]=(0x0,typeorm_1[_0x4a8b37(0x187)])('%'+_0x62c748+'%')),[0x0,0x1,'0','1'][_0x4a8b37(0x1cc)](_0x537924)&&(_0x55eafb['status']=_0x537924);const [_0x21092e,_0x2de8a2]=await this[_0x4a8b37(0x1ac)]['findAndCount']({'where':_0x55eafb,'order':{'order':_0x4a8b37(0x1d4)},'skip':(page-0x1)*size,'take':size}),_0x1b33f9=_0x21092e[_0x4a8b37(0x1d9)](_0x465aa5=>_0x465aa5['id']),_0x1b7b16=await this['appEntity'][_0x4a8b37(0x1c2)]({'where':{'catId':(0x0,typeorm_1['In'])(_0x1b33f9)}}),_0xe5dba0={};return _0x1b7b16[_0x4a8b37(0x1e2)](_0x3592ef=>{const _0x44e2f7=_0x4a8b37;_0xe5dba0[_0x3592ef[_0x44e2f7(0x1ae)]]?_0xe5dba0[_0x3592ef['catId']]+=0x1:_0xe5dba0[_0x3592ef[_0x44e2f7(0x1ae)]]=0x1;}),_0x21092e[_0x4a8b37(0x1e2)](_0x5c3d10=>_0x5c3d10[_0x4a8b37(0x1d5)]=_0xe5dba0[_0x5c3d10['id']]||0x0),{'rows':_0x21092e,'count':_0x2de8a2};}async['appList'](_0x7704c4,_0x560ac5,_0x2d5f4b='id'){const _0x8e21dc=_0x5e075a;var _0x37ad69;const {page:page=0x1,size:size=0xa,name:_0x113542,status:_0x3eb897,catId:_0x28feb0,role:_0x25c707}=_0x560ac5,_0x2cebb5={};_0x113542&&(_0x2cebb5[_0x8e21dc(0x194)]=(0x0,typeorm_1[_0x8e21dc(0x187)])('%'+_0x113542+'%')),_0x28feb0&&(_0x2cebb5['catId']=_0x28feb0),_0x25c707&&(_0x2cebb5[_0x8e21dc(0x1da)]=_0x25c707),_0x3eb897&&(_0x2cebb5['status']=_0x3eb897);const [_0x4945b6,_0x14d342]=await this[_0x8e21dc(0x1a6)][_0x8e21dc(0x186)]({'where':_0x2cebb5,'order':{[_0x2d5f4b]:_0x8e21dc(0x1d4)},'skip':(page-0x1)*size,'take':size}),_0x3052a1=_0x4945b6[_0x8e21dc(0x1d9)](_0x31dd17=>_0x31dd17[_0x8e21dc(0x1ae)]),_0x4f6d43=await this[_0x8e21dc(0x1ac)][_0x8e21dc(0x1c2)]({'where':{'id':(0x0,typeorm_1['In'])(_0x3052a1)}});return _0x4945b6[_0x8e21dc(0x1e2)](_0x14db1a=>{const _0x5c963d=_0x8e21dc,_0x104adc=_0x4f6d43[_0x5c963d(0x1c2)](_0x33d798=>_0x33d798['id']===_0x14db1a[_0x5c963d(0x1ae)]);_0x14db1a[_0x5c963d(0x1b7)]=_0x104adc?_0x104adc[_0x5c963d(0x194)]:'';}),((_0x37ad69=_0x7704c4===null||_0x7704c4===void 0x0?void 0x0:_0x7704c4[_0x8e21dc(0x196)])===null||_0x37ad69===void 0x0?void 0x0:_0x37ad69[_0x8e21dc(0x1da)])!=='super'&&_0x4945b6[_0x8e21dc(0x1e2)](_0x1b1cee=>{const _0x4240c7=_0x8e21dc;delete _0x1b1cee[_0x4240c7(0x18a)];}),{'rows':_0x4945b6,'count':_0x14d342};}async[_0x5e075a(0x1cf)](_0x5bad06,_0x1cae42,_0x312237='id'){const _0x4d6be4=_0x5e075a;var _0x1e192c;const {page:page=0x1,size:size=0x3e8,name:_0x36b229,catId:_0x18a8d8,role:_0x241c01}=_0x1cae42,_0x12fd0c=[{'status':(0x0,typeorm_1['In'])([0x1,0x4]),'userId':(0x0,typeorm_1['IsNull'])(),'public':![]},{'userId':(0x0,typeorm_1[_0x4d6be4(0x1d3)])(0x0),'public':!![]}],[_0x18146a,_0x17f92b]=await this[_0x4d6be4(0x1a6)][_0x4d6be4(0x186)]({'where':_0x12fd0c,'order':{'order':_0x4d6be4(0x1d4)},'skip':(page-0x1)*size,'take':size}),_0x5394a1=_0x18146a[_0x4d6be4(0x1d9)](_0x2a8f2c=>_0x2a8f2c[_0x4d6be4(0x1ae)]),_0x53ac93=await this[_0x4d6be4(0x1ac)][_0x4d6be4(0x1c2)]({'where':{'id':(0x0,typeorm_1['In'])(_0x5394a1)}});return _0x18146a[_0x4d6be4(0x1e2)](_0x32bcf1=>{const _0x2124ee=_0x4d6be4,_0xa4fa0c=_0x53ac93[_0x2124ee(0x1c2)](_0x309893=>_0x309893['id']===_0x32bcf1['catId']);_0x32bcf1[_0x2124ee(0x1b7)]=_0xa4fa0c?_0xa4fa0c[_0x2124ee(0x194)]:'';}),((_0x1e192c=_0x5bad06===null||_0x5bad06===void 0x0?void 0x0:_0x5bad06['user'])===null||_0x1e192c===void 0x0?void 0x0:_0x1e192c[_0x4d6be4(0x1da)])!==_0x4d6be4(0x188)&&_0x18146a[_0x4d6be4(0x1e2)](_0x3da8e4=>{delete _0x3da8e4['preset'];}),{'rows':_0x18146a,'count':_0x17f92b};}async[_0x5e075a(0x1e6)](_0x412bca){const _0xbb21ed=_0x5e075a,{name:_0x25e036,catId:_0x5a4027}=_0x412bca;_0x412bca[_0xbb21ed(0x1da)]=_0xbb21ed(0x192);const _0xf1596e=await this[_0xbb21ed(0x1a6)]['findOne']({'where':{'name':_0x25e036}});if(_0xf1596e)throw new common_1['HttpException'](_0xbb21ed(0x1e3),common_1[_0xbb21ed(0x1a1)]['BAD_REQUEST']);const _0x22f75e=await this[_0xbb21ed(0x1ac)]['findOne']({'where':{'id':_0x5a4027}});if(!_0x22f75e)throw new common_1[(_0xbb21ed(0x1c6))](_0xbb21ed(0x1b5),common_1[_0xbb21ed(0x1a1)][_0xbb21ed(0x18d)]);return await this[_0xbb21ed(0x1a6)][_0xbb21ed(0x1aa)](_0x412bca);}async[_0x5e075a(0x199)](_0x5c8c19,_0x38e17f){const _0x201241=_0x5e075a,{id:_0x1604b9}=_0x38e17f['user'],{name:_0x201174,catId:_0x247d89,des:_0x3f3725,preset:_0x5d1e15,coverImg:_0x316c49,demoData:_0x307f7a,public:_0x531626,appId:_0x5eae63}=_0x5c8c19;if(_0x5eae63){const _0x305e21=await this[_0x201241(0x1a6)]['findOne']({'where':{'id':_0x5eae63,'userId':_0x1604b9}});if(!_0x305e21)throw new common_1[(_0x201241(0x1c6))](_0x201241(0x1e0),common_1[_0x201241(0x1a1)][_0x201241(0x18d)]);const _0x3c189d={'name':_0x201174,'catId':_0x247d89,'des':_0x3f3725,'preset':_0x5d1e15,'coverImg':_0x316c49,'demoData':_0x307f7a,'public':_0x531626,'status':_0x531626?0x3:0x1},_0x381026=await this[_0x201241(0x1a6)]['update']({'id':_0x5eae63,'userId':_0x1604b9},_0x3c189d);if(_0x381026[_0x201241(0x1cb)])return'修改成功';else throw new common_1[(_0x201241(0x1c6))](_0x201241(0x1dd),common_1['HttpStatus'][_0x201241(0x18d)]);}if(!_0x5eae63){const _0x225753=await this['appCatsEntity'][_0x201241(0x1ca)]({'where':{'id':_0x247d89}});if(!_0x225753)throw new common_1[(_0x201241(0x1c6))](_0x201241(0x1b5),common_1[_0x201241(0x1a1)][_0x201241(0x18d)]);const _0x45452b=await this[_0x201241(0x1a6)]['findOne']({'where':{'name':_0x201174}});if(_0x45452b)throw new common_1[(_0x201241(0x1c6))](_0x201241(0x1e3),common_1[_0x201241(0x1a1)][_0x201241(0x18d)]);const _0xb6f41f={'name':_0x201174,'catId':_0x247d89,'des':_0x3f3725,'preset':_0x5d1e15,'coverImg':_0x316c49,'status':_0x531626?0x3:0x1,'demoData':_0x307f7a,'public':_0x531626,'role':_0x201241(0x196),'userId':_0x1604b9},_0x188898=await this['appEntity'][_0x201241(0x1aa)](_0xb6f41f),_0x1376eb={'appId':_0x188898['id'],'userId':_0x1604b9,'appType':_0x201241(0x196),'public':_0x531626,'status':_0x531626?0x3:0x1,'catId':_0x247d89};return this[_0x201241(0x195)][_0x201241(0x1aa)](_0x1376eb);}}async[_0x5e075a(0x185)](_0x59a62e){const _0x5659ff=_0x5e075a,{id:_0x1e78a9,name:_0x1675d6,catId:_0x50599e,status:_0x45f955}=_0x59a62e,_0x3cb832=await this[_0x5659ff(0x1a6)]['findOne']({'where':{'name':_0x1675d6,'id':(0x0,typeorm_1[_0x5659ff(0x1e5)])(_0x1e78a9)}});if(_0x3cb832)throw new common_1['HttpException'](_0x5659ff(0x1e3),common_1[_0x5659ff(0x1a1)][_0x5659ff(0x18d)]);const _0x236476=await this[_0x5659ff(0x1ac)][_0x5659ff(0x1ca)]({'where':{'id':_0x50599e}});if(!_0x236476)throw new common_1[(_0x5659ff(0x1c6))]('该分类不存在！',common_1[_0x5659ff(0x1a1)][_0x5659ff(0x18d)]);const _0x5d4cf3=await this['appEntity']['findOne']({'where':{'id':_0x1e78a9}});_0x5d4cf3[_0x5659ff(0x1bf)]!==_0x59a62e[_0x5659ff(0x1bf)]&&await this[_0x5659ff(0x195)]['update']({'appId':_0x1e78a9},{'status':_0x45f955});const _0x12c208=await this['appEntity'][_0x5659ff(0x1df)]({'id':_0x1e78a9},_0x59a62e);if(_0x12c208[_0x5659ff(0x1cb)]>0x0)return _0x5659ff(0x193);throw new common_1[(_0x5659ff(0x1c6))](_0x5659ff(0x1ce),common_1[_0x5659ff(0x1a1)][_0x5659ff(0x18d)]);}async[_0x5e075a(0x1d6)](_0x165377){const _0x5d2e5b=_0x5e075a,{id:_0x24e182}=_0x165377,_0x5bf938=await this[_0x5d2e5b(0x1a6)]['findOne']({'where':{'id':_0x24e182}});if(!_0x5bf938)throw new common_1['HttpException']('该应用不存在！',common_1['HttpStatus'][_0x5d2e5b(0x18d)]);const _0x412712=await this[_0x5d2e5b(0x195)][_0x5d2e5b(0x1bc)]({'where':{'appId':_0x24e182}});if(_0x412712>0x0)throw new common_1['HttpException'](_0x5d2e5b(0x1a7),common_1[_0x5d2e5b(0x1a1)][_0x5d2e5b(0x18d)]);const _0x23e772=await this[_0x5d2e5b(0x1a6)][_0x5d2e5b(0x18e)](_0x24e182);if(_0x23e772[_0x5d2e5b(0x1cb)]>0x0)return _0x5d2e5b(0x1e4);throw new common_1[(_0x5d2e5b(0x1c6))](_0x5d2e5b(0x189),common_1[_0x5d2e5b(0x1a1)][_0x5d2e5b(0x18d)]);}async['auditPass'](_0x3aebb1){const _0x4deecc=_0x5e075a,{id:_0x361eb2}=_0x3aebb1,_0x46dc2e=await this[_0x4deecc(0x1a6)]['findOne']({'where':{'id':_0x361eb2,'status':0x3}});if(!_0x46dc2e)throw new common_1[(_0x4deecc(0x1c6))](_0x4deecc(0x1de),common_1[_0x4deecc(0x1a1)]['BAD_REQUEST']);return await this['appEntity']['update']({'id':_0x361eb2},{'status':0x4}),await this[_0x4deecc(0x195)]['update']({'appId':_0x361eb2},{'status':0x4}),'应用审核通过';}async['auditFail'](_0x4ea066){const _0x47241b=_0x5e075a,{id:_0x1102d3}=_0x4ea066,_0x56dbea=await this[_0x47241b(0x1a6)][_0x47241b(0x1ca)]({'where':{'id':_0x1102d3,'status':0x3}});if(!_0x56dbea)throw new common_1[(_0x47241b(0x1c6))](_0x47241b(0x1de),common_1[_0x47241b(0x1a1)][_0x47241b(0x18d)]);return await this[_0x47241b(0x1a6)]['update']({'id':_0x1102d3},{'status':0x5}),await this[_0x47241b(0x195)][_0x47241b(0x1df)]({'appId':_0x1102d3},{'status':0x5}),_0x47241b(0x1dc);}async['delMineApp'](_0x15e823,_0x1e819c){const _0x23809e=_0x5e075a,{id:_0x3b09c7}=_0x15e823,_0x3f1b7b=await this[_0x23809e(0x1a6)][_0x23809e(0x1ca)]({'where':{'id':_0x3b09c7,'userId':_0x1e819c[_0x23809e(0x196)]['id']}});if(!_0x3f1b7b)throw new common_1[(_0x23809e(0x1c6))](_0x23809e(0x1e7),common_1[_0x23809e(0x1a1)]['BAD_REQUEST']);return await this[_0x23809e(0x1a6)][_0x23809e(0x18e)](_0x3b09c7),await this[_0x23809e(0x195)][_0x23809e(0x18e)]({'appId':_0x3b09c7,'userId':_0x1e819c[_0x23809e(0x196)]['id']}),_0x23809e(0x19e);}async[_0x5e075a(0x1d8)](_0x51715e,_0x37ca3b){const _0x450069=_0x5e075a,{appId:_0x5d3a63}=_0x51715e,{id:_0x22de8b}=_0x37ca3b['user'],_0x424f9f=await this[_0x450069(0x195)][_0x450069(0x1ca)]({'where':{'appId':_0x5d3a63,'userId':_0x22de8b}});if(_0x424f9f){const _0x5d68d2=await this[_0x450069(0x195)]['delete']({'appId':_0x5d3a63,'userId':_0x22de8b});if(_0x5d68d2['affected']>0x0)return _0x450069(0x18f);else throw new common_1[(_0x450069(0x1c6))]('取消收藏失败！',common_1[_0x450069(0x1a1)][_0x450069(0x18d)]);}const _0x555ac0=await this[_0x450069(0x1a6)][_0x450069(0x1ca)]({'where':{'id':_0x5d3a63}}),{id:_0x3c83f8,role:_0xe414ac,catId:_0x22b92e}=_0x555ac0,_0x29c7df={'userId':_0x22de8b,'appId':_0x3c83f8,'catId':_0x22b92e,'appRole':_0xe414ac,'public':!![],'status':0x1};return await this[_0x450069(0x195)][_0x450069(0x1aa)](_0x29c7df),_0x450069(0x19b);}async[_0x5e075a(0x197)](_0x2d3250,_0x11ee47={'page':0x1,'size':0x1e}){const _0x2f2809=_0x5e075a,{id:_0x406650}=_0x2d3250['user'],{page:page=0x1,size:size=0x1e}=_0x11ee47,[_0x5fa20f,_0x39d10b]=await this[_0x2f2809(0x195)][_0x2f2809(0x186)]({'where':{'userId':_0x406650,'status':(0x0,typeorm_1['In'])([0x1,0x3,0x4,0x5])},'order':{'id':_0x2f2809(0x1d4)},'skip':(page-0x1)*size,'take':size}),_0x231978=_0x5fa20f['map'](_0x17e935=>_0x17e935['appId']),_0x21c0b1=await this[_0x2f2809(0x1a6)][_0x2f2809(0x1c2)]({'where':{'id':(0x0,typeorm_1['In'])(_0x231978)}});return _0x5fa20f[_0x2f2809(0x1e2)](_0x4985bf=>{const _0x566cbf=_0x2f2809,_0x1bc92a=_0x21c0b1['find'](_0x555f6e=>_0x555f6e['id']===_0x4985bf[_0x566cbf(0x1bb)]);_0x4985bf[_0x566cbf(0x18b)]=_0x1bc92a?_0x1bc92a[_0x566cbf(0x194)]:'',_0x4985bf[_0x566cbf(0x1b8)]=_0x1bc92a?_0x1bc92a['role']:'',_0x4985bf['appDes']=_0x1bc92a?_0x1bc92a[_0x566cbf(0x1db)]:'',_0x4985bf['coverImg']=_0x1bc92a?_0x1bc92a['coverImg']:'',_0x4985bf[_0x566cbf(0x198)]=_0x1bc92a?_0x1bc92a[_0x566cbf(0x198)]:'',_0x4985bf[_0x566cbf(0x18a)]=_0x1bc92a[_0x566cbf(0x1b4)]===_0x406650?_0x1bc92a['preset']:'******';}),{'rows':_0x5fa20f,'count':_0x39d10b};}};AppService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_2['InjectRepository'])(appCats_entity_1[_0x5e075a(0x1e8)])),__param(0x1,(0x0,typeorm_2[_0x5e075a(0x1b2)])(app_entity_1[_0x5e075a(0x1d1)])),__param(0x2,(0x0,typeorm_2['InjectRepository'])(userApps_entity_1[_0x5e075a(0x1ab)])),__metadata(_0x5e075a(0x1c7),[typeorm_1[_0x5e075a(0x1c0)],typeorm_1[_0x5e075a(0x1c0)],typeorm_1[_0x5e075a(0x1c0)]])],AppService),exports[_0x5e075a(0x1d7)]=AppService;