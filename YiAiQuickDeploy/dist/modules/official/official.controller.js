'use strict';const _0x31825a=_0x4a1c;(function(_0x434faa,_0x2cf3b4){const _0x36a11d=_0x4a1c,_0x508fb0=_0x434faa();while(!![]){try{const _0x1201be=parseInt(_0x36a11d(0x192))/0x1*(parseInt(_0x36a11d(0x144))/0x2)+parseInt(_0x36a11d(0x17c))/0x3+-parseInt(_0x36a11d(0x19f))/0x4+-parseInt(_0x36a11d(0x163))/0x5*(parseInt(_0x36a11d(0x160))/0x6)+parseInt(_0x36a11d(0x14a))/0x7+parseInt(_0x36a11d(0x155))/0x8*(parseInt(_0x36a11d(0x16e))/0x9)+-parseInt(_0x36a11d(0x172))/0xa;if(_0x1201be===_0x2cf3b4)break;else _0x508fb0['push'](_0x508fb0['shift']());}catch(_0x20d0f3){_0x508fb0['push'](_0x508fb0['shift']());}}}(_0x457f,0xa3ae9));function _0x4a1c(_0x505617,_0x5043fd){const _0x457f3c=_0x457f();return _0x4a1c=function(_0x4a1ca6,_0x5d0360){_0x4a1ca6=_0x4a1ca6-0x13f;let _0x450655=_0x457f3c[_0x4a1ca6];return _0x450655;},_0x4a1c(_0x505617,_0x5043fd);}var __decorate=this&&this['__decorate']||function(_0x1b5685,_0x174de0,_0x32ab7e,_0x4ff0d2){const _0x407dbf=_0x4a1c;var _0x4202ca=arguments[_0x407dbf(0x157)],_0x2d0169=_0x4202ca<0x3?_0x174de0:_0x4ff0d2===null?_0x4ff0d2=Object['getOwnPropertyDescriptor'](_0x174de0,_0x32ab7e):_0x4ff0d2,_0x430f42;if(typeof Reflect===_0x407dbf(0x17e)&&typeof Reflect[_0x407dbf(0x180)]===_0x407dbf(0x189))_0x2d0169=Reflect['decorate'](_0x1b5685,_0x174de0,_0x32ab7e,_0x4ff0d2);else{for(var _0x4dc0e7=_0x1b5685[_0x407dbf(0x157)]-0x1;_0x4dc0e7>=0x0;_0x4dc0e7--)if(_0x430f42=_0x1b5685[_0x4dc0e7])_0x2d0169=(_0x4202ca<0x3?_0x430f42(_0x2d0169):_0x4202ca>0x3?_0x430f42(_0x174de0,_0x32ab7e,_0x2d0169):_0x430f42(_0x174de0,_0x32ab7e))||_0x2d0169;}return _0x4202ca>0x3&&_0x2d0169&&Object[_0x407dbf(0x158)](_0x174de0,_0x32ab7e,_0x2d0169),_0x2d0169;},__metadata=this&&this[_0x31825a(0x183)]||function(_0x48cf89,_0x42d10b){const _0x3a57f7=_0x31825a;if(typeof Reflect==='object'&&typeof Reflect[_0x3a57f7(0x162)]===_0x3a57f7(0x189))return Reflect[_0x3a57f7(0x162)](_0x48cf89,_0x42d10b);},__param=this&&this[_0x31825a(0x19d)]||function(_0x595cf4,_0x52e0c7){return function(_0x4ea6cb,_0x5e5fe4){_0x52e0c7(_0x4ea6cb,_0x5e5fe4,_0x595cf4);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0x31825a(0x18c)]=void 0x0;const common_1=require(_0x31825a(0x195)),swagger_1=require(_0x31825a(0x15e)),jwtAuth_guard_1=require(_0x31825a(0x152)),official_service_1=require(_0x31825a(0x167)),getQrCode_dto_1=require(_0x31825a(0x17b)),getQrSceneStr_dto_1=require(_0x31825a(0x14e));function _0x457f(){const _0x4be44d=['genXmlMsg','genXmlMsgByConfig','msgtype','qrscene_','design:returntype','__param','ISDEV','5298464YmOOVS','signature','status','GetQrSceneStrDto','official','公众号通知接口GET','86pulVUp','verify','Body','content','notify','scan','7075733svXLnr','获取登录二维码sceneStr','获取二维码','get\x20通知>>>','./dto/getQrSceneStr.dto','getJsapiTicket','VIEW','Query','../../common/auth/jwtAuth.guard','loginByCode','GetQrCodeDto','16jjcJAD','officialService','length','defineProperty','bindWxBySceneStr','officialBindAccountText','getRedirectUrl','Post','扫码绑定轮询查询','@nestjs/swagger','unsubscribe','1068evsYrB','ApiTags','metadata','4730kNDWUH','Req','sceneStr:\x20','扫码登录轮询查询','./official.service','officialScanLoginText','includes','fromusername','officialSubscribeText','sceneStr','code','3607965rErkMx','获取绑定二维码的sceneStr','获取注册配置','design:paramtypes','10936910sgBbZy','公众号静默登录','send','design:type','getQRCode','timestamp','SCAN','event','split','./dto/getQrCode.dto','2483652OwbDgB','getQRSceneStr','object','url','decorate','ApiOperation','prototype','__metadata','loginBySceneStr','UseGuards','获取登录跳转地址','aotoPlay','公众号通知接口POST','function','xml:\x20','JwtAuthGuard','OfficialController','env','log','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=','scanBindWx','Get','14341ZMfKhq','notifyPost','getQRSceneStrByBind','@nestjs/common','eventkey','subscribe'];_0x457f=function(){return _0x4be44d;};return _0x457f();}let OfficialController=class OfficialController{constructor(_0x593949){const _0x32ddc3=_0x31825a;this[_0x32ddc3(0x156)]=_0x593949;}async[_0x31825a(0x148)](_0x2f46bb,_0x5d6881,_0x48d6a7){const _0x3b6e5c=_0x31825a;console[_0x3b6e5c(0x18e)](_0x3b6e5c(0x14d),_0x5d6881,_0x48d6a7);const _0x44cb30=await this[_0x3b6e5c(0x156)][_0x3b6e5c(0x145)](_0x5d6881[_0x3b6e5c(0x13f)],_0x5d6881['nonce'],_0x5d6881[_0x3b6e5c(0x177)]);return _0x44cb30?_0x5d6881['echostr']:'';}async['notifyPost'](_0x1d3bdf,_0x4a7de6,_0x3daadb,_0x2d48ba){const _0x51d4d8=_0x31825a,{xml:_0x4d3803}=_0x3daadb;console[_0x51d4d8(0x18e)](_0x51d4d8(0x18a),_0x4d3803);if(_0x4d3803[_0x51d4d8(0x19a)][0x0]==_0x51d4d8(0x179)){if(_0x4d3803[_0x51d4d8(0x179)][0x0]==_0x51d4d8(0x150)||_0x4d3803[_0x51d4d8(0x179)][0x0]=='CLICK')return _0x2d48ba[_0x51d4d8(0x140)](0xc8)[_0x51d4d8(0x174)]('');if(_0x4d3803[_0x51d4d8(0x179)][0x0]==_0x51d4d8(0x178)){console[_0x51d4d8(0x18e)]('扫码');const _0x475d6d=_0x4d3803[_0x51d4d8(0x196)][0x0];if(_0x475d6d['includes']('/')){this['officialService'][_0x51d4d8(0x190)](_0x4d3803[_0x51d4d8(0x16a)][0x0],_0x475d6d);const _0xc74732=await this[_0x51d4d8(0x156)][_0x51d4d8(0x199)](_0x4d3803,_0x51d4d8(0x15a));return _0x2d48ba[_0x51d4d8(0x140)](0xc8)[_0x51d4d8(0x174)](_0xc74732);}this[_0x51d4d8(0x156)]['scan'](_0x4d3803[_0x51d4d8(0x16a)][0x0],_0x475d6d);const _0x407176=await this[_0x51d4d8(0x156)][_0x51d4d8(0x199)](_0x4d3803,_0x51d4d8(0x168));return _0x2d48ba[_0x51d4d8(0x140)](0xc8)['send'](_0x407176);}if(_0x4d3803[_0x51d4d8(0x179)][0x0]==_0x51d4d8(0x197)){console[_0x51d4d8(0x18e)]('订阅',_0x4d3803['eventkey'][0x0]);const _0x15df9c=_0x4d3803[_0x51d4d8(0x196)][0x0][_0x51d4d8(0x17a)](_0x51d4d8(0x19b))[0x1];console[_0x51d4d8(0x18e)](_0x51d4d8(0x165),_0x15df9c);if(!_0x15df9c){const _0x10e62e=await this[_0x51d4d8(0x156)]['genXmlMsgByConfig'](_0x4d3803,_0x51d4d8(0x16b));return _0x2d48ba[_0x51d4d8(0x140)](0xc8)[_0x51d4d8(0x174)](_0x10e62e);}if(_0x15df9c[_0x51d4d8(0x169)]('/')){this[_0x51d4d8(0x156)]['scanBindWx'](_0x4d3803[_0x51d4d8(0x16a)][0x0],_0x15df9c);const _0x5314ab=await this[_0x51d4d8(0x156)][_0x51d4d8(0x199)](_0x4d3803,'officialBindAccountText');return _0x2d48ba[_0x51d4d8(0x140)](0xc8)[_0x51d4d8(0x174)](_0x5314ab);}this[_0x51d4d8(0x156)][_0x51d4d8(0x149)](_0x4d3803[_0x51d4d8(0x16a)][0x0],_0x15df9c);const _0x3e5848=await this[_0x51d4d8(0x156)]['genXmlMsgByConfig'](_0x4d3803,_0x51d4d8(0x16b));return _0x2d48ba['status'](0xc8)[_0x51d4d8(0x174)](_0x3e5848);}if(_0x4d3803[_0x51d4d8(0x179)][0x0]==_0x51d4d8(0x15f))return _0x2d48ba[_0x51d4d8(0x140)](0xc8)[_0x51d4d8(0x174)]('');}if(_0x4d3803['msgtype'][0x0]=='text'){const _0x3c8757=await this[_0x51d4d8(0x156)][_0x51d4d8(0x187)](_0x4d3803[_0x51d4d8(0x147)][0x0]),_0x486a17=await this['officialService'][_0x51d4d8(0x198)](_0x4d3803,_0x3c8757);return _0x2d48ba[_0x51d4d8(0x140)](0xc8)[_0x51d4d8(0x174)](_0x486a17);}return'success';}async[_0x31825a(0x17d)](_0x42a707){const _0x2095ac=_0x31825a;return this[_0x2095ac(0x156)]['getQRSceneStr'](_0x42a707);}async[_0x31825a(0x194)](_0x529288){const _0x2e5c25=_0x31825a;return this[_0x2e5c25(0x156)][_0x2e5c25(0x194)](_0x529288);}async['getQRCode'](_0x4e20d2){const _0x39fd90=_0x31825a;if(process[_0x39fd90(0x18d)][_0x39fd90(0x19e)]==='TRUE')return'';const _0x1051aa=await this[_0x39fd90(0x156)]['getQRCodeTicket'](_0x4e20d2['sceneStr']);return _0x39fd90(0x18f)+encodeURIComponent(_0x1051aa);}async[_0x31825a(0x184)](_0x163c98,_0x4503d3){const _0x48cf11=_0x31825a;return this[_0x48cf11(0x156)][_0x48cf11(0x184)](_0x163c98,_0x4503d3[_0x48cf11(0x16c)]);}async[_0x31825a(0x159)](_0x4ccc67,_0xf7471e){const _0x47ad26=_0x31825a;return this[_0x47ad26(0x156)][_0x47ad26(0x159)](_0x4ccc67,_0xf7471e[_0x47ad26(0x16c)]);}async['getRedirectUrl'](_0x45cc12){const _0x15696f=_0x31825a;return this['officialService']['getRedirectUrl'](_0x45cc12[_0x15696f(0x17f)]);}async[_0x31825a(0x14f)](_0x518315){const _0x43912a=_0x31825a;return this[_0x43912a(0x156)][_0x43912a(0x14f)](_0x518315[_0x43912a(0x17f)]);}async[_0x31825a(0x153)](_0x3e01c1,_0x3a4ea6){const _0x2274b7=_0x31825a;return this[_0x2274b7(0x156)]['loginByCode'](_0x3e01c1,_0x3a4ea6[_0x2274b7(0x16d)]);}};__decorate([(0x0,common_1[_0x31825a(0x191)])(_0x31825a(0x148)),(0x0,swagger_1[_0x31825a(0x181)])({'summary':_0x31825a(0x143)}),__param(0x0,(0x0,common_1[_0x31825a(0x164)])()),__param(0x1,(0x0,common_1['Query'])()),__param(0x2,(0x0,common_1[_0x31825a(0x146)])()),__metadata(_0x31825a(0x175),Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata(_0x31825a(0x19c),Promise)],OfficialController['prototype'],'notify',null),__decorate([(0x0,common_1[_0x31825a(0x15c)])('notify'),(0x0,swagger_1[_0x31825a(0x181)])({'summary':_0x31825a(0x188)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1['Query'])()),__param(0x2,(0x0,common_1[_0x31825a(0x146)])()),__param(0x3,(0x0,common_1['Res'])()),__metadata(_0x31825a(0x175),Function),__metadata('design:paramtypes',[Object,Object,Object,Object]),__metadata(_0x31825a(0x19c),Promise)],OfficialController[_0x31825a(0x182)],_0x31825a(0x193),null),__decorate([(0x0,common_1[_0x31825a(0x15c)])('getQRSceneStr'),(0x0,swagger_1[_0x31825a(0x181)])({'summary':_0x31825a(0x14b)}),__param(0x0,(0x0,common_1[_0x31825a(0x146)])()),__metadata(_0x31825a(0x175),Function),__metadata('design:paramtypes',[getQrSceneStr_dto_1[_0x31825a(0x141)]]),__metadata(_0x31825a(0x19c),Promise)],OfficialController[_0x31825a(0x182)],_0x31825a(0x17d),null),__decorate([(0x0,common_1[_0x31825a(0x15c)])(_0x31825a(0x194)),(0x0,swagger_1[_0x31825a(0x181)])({'summary':_0x31825a(0x16f)}),(0x0,common_1[_0x31825a(0x185)])(jwtAuth_guard_1[_0x31825a(0x18b)]),__param(0x0,(0x0,common_1[_0x31825a(0x164)])()),__metadata(_0x31825a(0x175),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x31825a(0x19c),Promise)],OfficialController['prototype'],_0x31825a(0x194),null),__decorate([(0x0,common_1[_0x31825a(0x191)])('getQRCode'),(0x0,swagger_1[_0x31825a(0x181)])({'summary':_0x31825a(0x14c)}),__param(0x0,(0x0,common_1[_0x31825a(0x151)])()),__metadata('design:type',Function),__metadata(_0x31825a(0x171),[getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0x31825a(0x19c),Promise)],OfficialController[_0x31825a(0x182)],_0x31825a(0x176),null),__decorate([(0x0,common_1['Post'])('loginBySceneStr'),(0x0,swagger_1[_0x31825a(0x181)])({'summary':_0x31825a(0x166)}),__param(0x0,(0x0,common_1[_0x31825a(0x164)])()),__param(0x1,(0x0,common_1[_0x31825a(0x146)])()),__metadata(_0x31825a(0x175),Function),__metadata(_0x31825a(0x171),[Object,getQrCode_dto_1[_0x31825a(0x154)]]),__metadata('design:returntype',Promise)],OfficialController[_0x31825a(0x182)],_0x31825a(0x184),null),__decorate([(0x0,common_1[_0x31825a(0x15c)])(_0x31825a(0x159)),(0x0,swagger_1[_0x31825a(0x181)])({'summary':_0x31825a(0x15d)}),(0x0,common_1[_0x31825a(0x185)])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x31825a(0x146)])()),__metadata(_0x31825a(0x175),Function),__metadata(_0x31825a(0x171),[Object,getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0x31825a(0x19c),Promise)],OfficialController['prototype'],_0x31825a(0x159),null),__decorate([(0x0,common_1['Post'])(_0x31825a(0x15b)),(0x0,swagger_1[_0x31825a(0x181)])({'summary':_0x31825a(0x186)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x31825a(0x175),Function),__metadata(_0x31825a(0x171),[Object]),__metadata(_0x31825a(0x19c),Promise)],OfficialController[_0x31825a(0x182)],_0x31825a(0x15b),null),__decorate([(0x0,common_1[_0x31825a(0x15c)])(_0x31825a(0x14f)),(0x0,swagger_1['ApiOperation'])({'summary':_0x31825a(0x170)}),__param(0x0,(0x0,common_1[_0x31825a(0x146)])()),__metadata(_0x31825a(0x175),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x31825a(0x19c),Promise)],OfficialController[_0x31825a(0x182)],_0x31825a(0x14f),null),__decorate([(0x0,common_1[_0x31825a(0x15c)])(_0x31825a(0x153)),(0x0,swagger_1[_0x31825a(0x181)])({'summary':_0x31825a(0x173)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1['Body'])()),__metadata(_0x31825a(0x175),Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0x31825a(0x19c),Promise)],OfficialController[_0x31825a(0x182)],'loginByCode',null),OfficialController=__decorate([(0x0,swagger_1[_0x31825a(0x161)])(_0x31825a(0x142)),(0x0,common_1['Controller'])(_0x31825a(0x142)),__metadata(_0x31825a(0x171),[official_service_1['OfficialService']])],OfficialController),exports['OfficialController']=OfficialController;