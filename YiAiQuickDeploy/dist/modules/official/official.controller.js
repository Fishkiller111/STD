'use strict';const _0x3347de=_0x5ed7;(function(_0x4605a8,_0x333bac){const _0x1dd810=_0x5ed7,_0x3aecbe=_0x4605a8();while(!![]){try{const _0x21e4e9=parseInt(_0x1dd810(0x14a))/0x1+-parseInt(_0x1dd810(0x122))/0x2*(parseInt(_0x1dd810(0x11e))/0x3)+parseInt(_0x1dd810(0x147))/0x4*(-parseInt(_0x1dd810(0x109))/0x5)+parseInt(_0x1dd810(0x110))/0x6+parseInt(_0x1dd810(0x13f))/0x7+-parseInt(_0x1dd810(0xfc))/0x8+-parseInt(_0x1dd810(0x117))/0x9*(parseInt(_0x1dd810(0x120))/0xa);if(_0x21e4e9===_0x333bac)break;else _0x3aecbe['push'](_0x3aecbe['shift']());}catch(_0x157d89){_0x3aecbe['push'](_0x3aecbe['shift']());}}}(_0x4075,0xa6659));function _0x5ed7(_0x1a4437,_0x4980b1){const _0x407582=_0x4075();return _0x5ed7=function(_0x5ed7b7,_0x310e7d){_0x5ed7b7=_0x5ed7b7-0xec;let _0x2780ac=_0x407582[_0x5ed7b7];return _0x2780ac;},_0x5ed7(_0x1a4437,_0x4980b1);}var __decorate=this&&this[_0x3347de(0xff)]||function(_0x7be6e5,_0x2ed179,_0x515447,_0x525d3e){const _0x2e1f58=_0x3347de;var _0x539015=arguments[_0x2e1f58(0x140)],_0x29412d=_0x539015<0x3?_0x2ed179:_0x525d3e===null?_0x525d3e=Object[_0x2e1f58(0x134)](_0x2ed179,_0x515447):_0x525d3e,_0x554526;if(typeof Reflect===_0x2e1f58(0x149)&&typeof Reflect[_0x2e1f58(0x12c)]===_0x2e1f58(0x141))_0x29412d=Reflect[_0x2e1f58(0x12c)](_0x7be6e5,_0x2ed179,_0x515447,_0x525d3e);else{for(var _0x2d7436=_0x7be6e5[_0x2e1f58(0x140)]-0x1;_0x2d7436>=0x0;_0x2d7436--)if(_0x554526=_0x7be6e5[_0x2d7436])_0x29412d=(_0x539015<0x3?_0x554526(_0x29412d):_0x539015>0x3?_0x554526(_0x2ed179,_0x515447,_0x29412d):_0x554526(_0x2ed179,_0x515447))||_0x29412d;}return _0x539015>0x3&&_0x29412d&&Object[_0x2e1f58(0x10b)](_0x2ed179,_0x515447,_0x29412d),_0x29412d;},__metadata=this&&this[_0x3347de(0x101)]||function(_0x337bb8,_0x4bd87e){const _0x2d87ff=_0x3347de;if(typeof Reflect===_0x2d87ff(0x149)&&typeof Reflect[_0x2d87ff(0x128)]===_0x2d87ff(0x141))return Reflect[_0x2d87ff(0x128)](_0x337bb8,_0x4bd87e);},__param=this&&this[_0x3347de(0x12d)]||function(_0x729c60,_0x1315fc){return function(_0x3dc337,_0x196d00){_0x1315fc(_0x3dc337,_0x196d00,_0x729c60);};};Object[_0x3347de(0x10b)](exports,_0x3347de(0xee),{'value':!![]}),exports['OfficialController']=void 0x0;const common_1=require(_0x3347de(0x133)),swagger_1=require('@nestjs/swagger'),jwtAuth_guard_1=require(_0x3347de(0xf4)),official_service_1=require(_0x3347de(0x100)),getQrCode_dto_1=require(_0x3347de(0x12e)),getQrSceneStr_dto_1=require('./dto/getQrSceneStr.dto');let OfficialController=class OfficialController{constructor(_0x92df99){const _0x2fe430=_0x3347de;this[_0x2fe430(0x142)]=_0x92df99;}async[_0x3347de(0x139)](_0x28e852,_0x551204,_0x32267a){const _0x482329=_0x3347de;console['log']('get\x20通知>>>',_0x551204,_0x32267a);const _0x215aeb=await this[_0x482329(0x142)]['verify'](_0x551204[_0x482329(0x127)],_0x551204[_0x482329(0x131)],_0x551204[_0x482329(0x10c)]);return _0x215aeb?_0x551204[_0x482329(0x113)]:'';}async[_0x3347de(0xf6)](_0x505755,_0x39941d,_0x47fadf,_0x13ef0d){const _0x3f946c=_0x3347de,{xml:_0x417eaf}=_0x47fadf;console[_0x3f946c(0x129)]('xml:\x20',_0x417eaf);if(_0x417eaf[_0x3f946c(0x14b)][0x0]==_0x3f946c(0x136)){if(_0x417eaf[_0x3f946c(0x136)][0x0]==_0x3f946c(0x11b)||_0x417eaf[_0x3f946c(0x136)][0x0]==_0x3f946c(0xf0))return _0x13ef0d[_0x3f946c(0xf5)](0xc8)[_0x3f946c(0x102)]('');if(_0x417eaf[_0x3f946c(0x136)][0x0]==_0x3f946c(0x10a)){console[_0x3f946c(0x129)]('扫码');const _0x332189=_0x417eaf[_0x3f946c(0x114)][0x0];if(_0x332189['includes']('/')){this[_0x3f946c(0x142)]['scanBindWx'](_0x417eaf[_0x3f946c(0x132)][0x0],_0x332189);const _0x259fc3=await this[_0x3f946c(0x142)][_0x3f946c(0x10e)](_0x417eaf,_0x3f946c(0x10f));return _0x13ef0d[_0x3f946c(0xf5)](0xc8)[_0x3f946c(0x102)](_0x259fc3);}this[_0x3f946c(0x142)][_0x3f946c(0xf3)](_0x417eaf[_0x3f946c(0x132)][0x0],_0x332189);const _0x142e7e=await this[_0x3f946c(0x142)]['genXmlMsgByConfig'](_0x417eaf,_0x3f946c(0xfe));return _0x13ef0d[_0x3f946c(0xf5)](0xc8)[_0x3f946c(0x102)](_0x142e7e);}if(_0x417eaf[_0x3f946c(0x136)][0x0]=='subscribe'){console[_0x3f946c(0x129)]('订阅',_0x417eaf['eventkey'][0x0]);const _0x37759d=_0x417eaf[_0x3f946c(0x114)][0x0][_0x3f946c(0xf2)](_0x3f946c(0xed))[0x1];console['log'](_0x3f946c(0x135),_0x37759d);if(!_0x37759d){const _0x324844=await this['officialService'][_0x3f946c(0x10e)](_0x417eaf,_0x3f946c(0x13b));return _0x13ef0d[_0x3f946c(0xf5)](0xc8)['send'](_0x324844);}if(_0x37759d[_0x3f946c(0x143)]('/')){this[_0x3f946c(0x142)][_0x3f946c(0x124)](_0x417eaf[_0x3f946c(0x132)][0x0],_0x37759d);const _0x4e7e75=await this[_0x3f946c(0x142)][_0x3f946c(0x10e)](_0x417eaf,'officialBindAccountText');return _0x13ef0d[_0x3f946c(0xf5)](0xc8)[_0x3f946c(0x102)](_0x4e7e75);}this[_0x3f946c(0x142)]['scan'](_0x417eaf[_0x3f946c(0x132)][0x0],_0x37759d);const _0x20dbf9=await this[_0x3f946c(0x142)][_0x3f946c(0x10e)](_0x417eaf,_0x3f946c(0x13b));return _0x13ef0d[_0x3f946c(0xf5)](0xc8)[_0x3f946c(0x102)](_0x20dbf9);}if(_0x417eaf[_0x3f946c(0x136)][0x0]==_0x3f946c(0x125))return _0x13ef0d[_0x3f946c(0xf5)](0xc8)[_0x3f946c(0x102)]('');}if(_0x417eaf['msgtype'][0x0]==_0x3f946c(0x11f)){const _0x293600=await this[_0x3f946c(0x142)][_0x3f946c(0x146)](_0x417eaf[_0x3f946c(0x11d)][0x0]),_0x49a3bb=await this[_0x3f946c(0x142)][_0x3f946c(0x13d)](_0x417eaf,_0x293600);return _0x13ef0d[_0x3f946c(0xf5)](0xc8)['send'](_0x49a3bb);}return _0x3f946c(0x148);}async['getQRSceneStr'](_0x161da8){const _0x123e90=_0x3347de;return this[_0x123e90(0x142)][_0x123e90(0x126)](_0x161da8);}async['getQRSceneStrByBind'](_0xb22b5f){const _0x58cefb=_0x3347de;return this[_0x58cefb(0x142)][_0x58cefb(0xfa)](_0xb22b5f);}async[_0x3347de(0xfb)](_0x1f05e8){const _0xb5fe81=_0x3347de;if(process['env'][_0xb5fe81(0x13e)]===_0xb5fe81(0xec))return'';const _0x5676e4=await this[_0xb5fe81(0x142)]['getQRCodeTicket'](_0x1f05e8[_0xb5fe81(0x12a)]);return'https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket='+encodeURIComponent(_0x5676e4);}async['loginBySceneStr'](_0x3f32a8,_0x301f7e){const _0x4e7595=_0x3347de;return this[_0x4e7595(0x142)][_0x4e7595(0x12b)](_0x3f32a8,_0x301f7e['sceneStr']);}async[_0x3347de(0x10d)](_0x4d057f,_0x5eeaee){const _0x25abe4=_0x3347de;return this[_0x25abe4(0x142)][_0x25abe4(0x10d)](_0x4d057f,_0x5eeaee['sceneStr']);}async[_0x3347de(0xf8)](_0x425c14){const _0x1db674=_0x3347de;return this[_0x1db674(0x142)][_0x1db674(0xf8)](_0x425c14[_0x1db674(0x115)]);}async[_0x3347de(0x121)](_0x22fd73){const _0x220498=_0x3347de;return this[_0x220498(0x142)][_0x220498(0x121)](_0x22fd73[_0x220498(0x115)]);}async[_0x3347de(0x103)](_0x4e9143,_0x1997c4){const _0x2f13c3=_0x3347de;return this[_0x2f13c3(0x142)][_0x2f13c3(0x103)](_0x4e9143,_0x1997c4[_0x2f13c3(0xfd)]);}};__decorate([(0x0,common_1[_0x3347de(0x13a)])(_0x3347de(0x139)),(0x0,swagger_1[_0x3347de(0x118)])({'summary':_0x3347de(0x105)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x3347de(0x137)])()),__param(0x2,(0x0,common_1['Body'])()),__metadata(_0x3347de(0x104),Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata(_0x3347de(0xf7),Promise)],OfficialController['prototype'],'notify',null),__decorate([(0x0,common_1['Post'])(_0x3347de(0x139)),(0x0,swagger_1[_0x3347de(0x118)])({'summary':_0x3347de(0xf1)}),__param(0x0,(0x0,common_1[_0x3347de(0x12f)])()),__param(0x1,(0x0,common_1[_0x3347de(0x137)])()),__param(0x2,(0x0,common_1['Body'])()),__param(0x3,(0x0,common_1['Res'])()),__metadata('design:type',Function),__metadata(_0x3347de(0x11c),[Object,Object,Object,Object]),__metadata(_0x3347de(0xf7),Promise)],OfficialController['prototype'],_0x3347de(0xf6),null),__decorate([(0x0,common_1['Post'])(_0x3347de(0x126)),(0x0,swagger_1[_0x3347de(0x118)])({'summary':_0x3347de(0x112)}),__param(0x0,(0x0,common_1[_0x3347de(0x108)])()),__metadata(_0x3347de(0x104),Function),__metadata(_0x3347de(0x11c),[getQrSceneStr_dto_1[_0x3347de(0x145)]]),__metadata(_0x3347de(0xf7),Promise)],OfficialController[_0x3347de(0x144)],'getQRSceneStr',null),__decorate([(0x0,common_1[_0x3347de(0x107)])(_0x3347de(0xfa)),(0x0,swagger_1[_0x3347de(0x118)])({'summary':_0x3347de(0x130)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x3347de(0x119)]),__param(0x0,(0x0,common_1[_0x3347de(0x12f)])()),__metadata(_0x3347de(0x104),Function),__metadata(_0x3347de(0x11c),[Object]),__metadata('design:returntype',Promise)],OfficialController[_0x3347de(0x144)],'getQRSceneStrByBind',null),__decorate([(0x0,common_1[_0x3347de(0x13a)])(_0x3347de(0xfb)),(0x0,swagger_1['ApiOperation'])({'summary':_0x3347de(0x111)}),__param(0x0,(0x0,common_1[_0x3347de(0x137)])()),__metadata(_0x3347de(0x104),Function),__metadata(_0x3347de(0x11c),[getQrCode_dto_1[_0x3347de(0x11a)]]),__metadata(_0x3347de(0xf7),Promise)],OfficialController['prototype'],_0x3347de(0xfb),null),__decorate([(0x0,common_1[_0x3347de(0x107)])('loginBySceneStr'),(0x0,swagger_1[_0x3347de(0x118)])({'summary':_0x3347de(0x13c)}),__param(0x0,(0x0,common_1[_0x3347de(0x12f)])()),__param(0x1,(0x0,common_1[_0x3347de(0x108)])()),__metadata('design:type',Function),__metadata(_0x3347de(0x11c),[Object,getQrCode_dto_1[_0x3347de(0x11a)]]),__metadata('design:returntype',Promise)],OfficialController[_0x3347de(0x144)],_0x3347de(0x12b),null),__decorate([(0x0,common_1[_0x3347de(0x107)])(_0x3347de(0x10d)),(0x0,swagger_1[_0x3347de(0x118)])({'summary':_0x3347de(0x138)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x3347de(0x119)]),__param(0x0,(0x0,common_1[_0x3347de(0x12f)])()),__param(0x1,(0x0,common_1[_0x3347de(0x108)])()),__metadata(_0x3347de(0x104),Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1[_0x3347de(0x11a)]]),__metadata(_0x3347de(0xf7),Promise)],OfficialController[_0x3347de(0x144)],'bindWxBySceneStr',null),__decorate([(0x0,common_1[_0x3347de(0x107)])(_0x3347de(0xf8)),(0x0,swagger_1[_0x3347de(0x118)])({'summary':'获取登录跳转地址'}),__param(0x0,(0x0,common_1[_0x3347de(0x108)])()),__metadata(_0x3347de(0x104),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x3347de(0xf7),Promise)],OfficialController[_0x3347de(0x144)],_0x3347de(0xf8),null),__decorate([(0x0,common_1[_0x3347de(0x107)])(_0x3347de(0x121)),(0x0,swagger_1[_0x3347de(0x118)])({'summary':'获取注册配置'}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x3347de(0x104),Function),__metadata(_0x3347de(0x11c),[Object]),__metadata(_0x3347de(0xf7),Promise)],OfficialController[_0x3347de(0x144)],_0x3347de(0x121),null),__decorate([(0x0,common_1[_0x3347de(0x107)])(_0x3347de(0x103)),(0x0,swagger_1[_0x3347de(0x118)])({'summary':'公众号静默登录'}),__param(0x0,(0x0,common_1[_0x3347de(0x12f)])()),__param(0x1,(0x0,common_1[_0x3347de(0x108)])()),__metadata('design:type',Function),__metadata(_0x3347de(0x11c),[Object,Object]),__metadata(_0x3347de(0xf7),Promise)],OfficialController[_0x3347de(0x144)],'loginByCode',null),OfficialController=__decorate([(0x0,swagger_1[_0x3347de(0x116)])(_0x3347de(0xef)),(0x0,common_1[_0x3347de(0x106)])('official'),__metadata(_0x3347de(0x11c),[official_service_1[_0x3347de(0x123)]])],OfficialController),exports[_0x3347de(0xf9)]=OfficialController;function _0x4075(){const _0x1bc03d=['scanBindWx','unsubscribe','getQRSceneStr','signature','metadata','log','sceneStr','loginBySceneStr','decorate','__param','./dto/getQrCode.dto','Req','获取绑定二维码的sceneStr','nonce','fromusername','@nestjs/common','getOwnPropertyDescriptor','sceneStr:\x20','event','Query','扫码绑定轮询查询','notify','Get','officialSubscribeText','扫码登录轮询查询','genXmlMsg','ISDEV','5282830sNQmMU','length','function','officialService','includes','prototype','GetQrSceneStrDto','aotoPlay','138896doMmcO','success','object','1163213SMjTlv','msgtype','TRUE','qrscene_','__esModule','official','CLICK','公众号通知接口POST','split','scan','../../common/auth/jwtAuth.guard','status','notifyPost','design:returntype','getRedirectUrl','OfficialController','getQRSceneStrByBind','getQRCode','6478744NMibwO','code','officialScanLoginText','__decorate','./official.service','__metadata','send','loginByCode','design:type','公众号通知接口GET','Controller','Post','Body','35diqPdt','SCAN','defineProperty','timestamp','bindWxBySceneStr','genXmlMsgByConfig','officialBindAccountText','3910284YupZEo','获取二维码','获取登录二维码sceneStr','echostr','eventkey','url','ApiTags','7062993WArAho','ApiOperation','JwtAuthGuard','GetQrCodeDto','VIEW','design:paramtypes','content','3NQKPRd','text','10RUkAzh','getJsapiTicket','100736omMLjp','OfficialService'];_0x4075=function(){return _0x1bc03d;};return _0x4075();}