'use strict';const _0x309acb=_0x1675;(function(_0x5f09cb,_0x219612){const _0x10fee8=_0x1675,_0x3e8da4=_0x5f09cb();while(!![]){try{const _0x3919cf=parseInt(_0x10fee8(0x15c))/0x1+-parseInt(_0x10fee8(0x17a))/0x2+-parseInt(_0x10fee8(0x165))/0x3+parseInt(_0x10fee8(0x174))/0x4*(parseInt(_0x10fee8(0x16f))/0x5)+-parseInt(_0x10fee8(0x17d))/0x6*(parseInt(_0x10fee8(0x172))/0x7)+parseInt(_0x10fee8(0x148))/0x8+-parseInt(_0x10fee8(0x186))/0x9;if(_0x3919cf===_0x219612)break;else _0x3e8da4['push'](_0x3e8da4['shift']());}catch(_0x2781c5){_0x3e8da4['push'](_0x3e8da4['shift']());}}}(_0x5294,0xb9e76));var __decorate=this&&this[_0x309acb(0x15e)]||function(_0x3e38c5,_0x12c7a7,_0x43a431,_0xe31f7c){const _0x223521=_0x309acb;var _0x40dcfd=arguments[_0x223521(0x190)],_0x5d04b5=_0x40dcfd<0x3?_0x12c7a7:_0xe31f7c===null?_0xe31f7c=Object['getOwnPropertyDescriptor'](_0x12c7a7,_0x43a431):_0xe31f7c,_0x31cb48;if(typeof Reflect===_0x223521(0x14b)&&typeof Reflect[_0x223521(0x159)]===_0x223521(0x185))_0x5d04b5=Reflect[_0x223521(0x159)](_0x3e38c5,_0x12c7a7,_0x43a431,_0xe31f7c);else{for(var _0x5bcc76=_0x3e38c5[_0x223521(0x190)]-0x1;_0x5bcc76>=0x0;_0x5bcc76--)if(_0x31cb48=_0x3e38c5[_0x5bcc76])_0x5d04b5=(_0x40dcfd<0x3?_0x31cb48(_0x5d04b5):_0x40dcfd>0x3?_0x31cb48(_0x12c7a7,_0x43a431,_0x5d04b5):_0x31cb48(_0x12c7a7,_0x43a431))||_0x5d04b5;}return _0x40dcfd>0x3&&_0x5d04b5&&Object[_0x223521(0x144)](_0x12c7a7,_0x43a431,_0x5d04b5),_0x5d04b5;},__metadata=this&&this['__metadata']||function(_0x24fa3d,_0x1f61d7){const _0x3391ad=_0x309acb;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x3391ad(0x185))return Reflect['metadata'](_0x24fa3d,_0x1f61d7);},__param=this&&this[_0x309acb(0x161)]||function(_0x5da38b,_0x73b574){return function(_0x4f3122,_0x3361a4){_0x73b574(_0x4f3122,_0x3361a4,_0x5da38b);};};Object[_0x309acb(0x144)](exports,_0x309acb(0x18b),{'value':!![]}),exports[_0x309acb(0x163)]=void 0x0;function _0x1675(_0x3b0634,_0x326124){const _0x529425=_0x5294();return _0x1675=function(_0x1675f1,_0x4c532b){_0x1675f1=_0x1675f1-0x137;let _0x16951d=_0x529425[_0x1675f1];return _0x16951d;},_0x1675(_0x3b0634,_0x326124);}const common_1=require('@nestjs/common'),swagger_1=require('@nestjs/swagger'),jwtAuth_guard_1=require(_0x309acb(0x151)),official_service_1=require(_0x309acb(0x13f)),getQrCode_dto_1=require(_0x309acb(0x164)),getQrSceneStr_dto_1=require(_0x309acb(0x17c));let OfficialController=class OfficialController{constructor(_0x1b69c7){const _0x12cc06=_0x309acb;this[_0x12cc06(0x14e)]=_0x1b69c7;}async[_0x309acb(0x183)](_0x15a6dc,_0x5b2b87,_0x5136c9){const _0x4f268e=_0x309acb;console[_0x4f268e(0x16b)]('get\x20通知>>>',_0x5b2b87,_0x5136c9);const _0x29e19b=await this['officialService'][_0x4f268e(0x143)](_0x5b2b87[_0x4f268e(0x14d)],_0x5b2b87[_0x4f268e(0x175)],_0x5b2b87[_0x4f268e(0x157)]);return _0x29e19b?_0x5b2b87[_0x4f268e(0x188)]:'';}async[_0x309acb(0x14f)](_0x3d18ad,_0x5b9cf9,_0x403de4,_0x212c56){const _0x4aa665=_0x309acb,{xml:_0x3f7f72}=_0x403de4;console[_0x4aa665(0x16b)](_0x4aa665(0x191),_0x3f7f72);if(_0x3f7f72['msgtype'][0x0]==_0x4aa665(0x147)){if(_0x3f7f72[_0x4aa665(0x147)][0x0]==_0x4aa665(0x149)||_0x3f7f72[_0x4aa665(0x147)][0x0]=='CLICK')return _0x212c56[_0x4aa665(0x18c)](0xc8)[_0x4aa665(0x173)]('');if(_0x3f7f72[_0x4aa665(0x147)][0x0]=='SCAN'){console[_0x4aa665(0x16b)]('扫码');const _0x1ece10=_0x3f7f72[_0x4aa665(0x17e)][0x0];if(_0x1ece10[_0x4aa665(0x152)]('/')){this[_0x4aa665(0x14e)][_0x4aa665(0x17b)](_0x3f7f72['fromusername'][0x0],_0x1ece10);const _0x5bdbcf=await this[_0x4aa665(0x14e)][_0x4aa665(0x180)](_0x3f7f72,_0x4aa665(0x15d));return _0x212c56['status'](0xc8)['send'](_0x5bdbcf);}this[_0x4aa665(0x14e)][_0x4aa665(0x150)](_0x3f7f72[_0x4aa665(0x178)][0x0],_0x1ece10);const _0x1d1b06=await this[_0x4aa665(0x14e)][_0x4aa665(0x180)](_0x3f7f72,_0x4aa665(0x15b));return _0x212c56[_0x4aa665(0x18c)](0xc8)[_0x4aa665(0x173)](_0x1d1b06);}if(_0x3f7f72[_0x4aa665(0x147)][0x0]==_0x4aa665(0x169)){console[_0x4aa665(0x16b)]('订阅',_0x3f7f72[_0x4aa665(0x17e)][0x0]);const _0x41845c=_0x3f7f72[_0x4aa665(0x17e)][0x0][_0x4aa665(0x138)]('qrscene_')[0x1];console['log'](_0x4aa665(0x18d),_0x41845c);if(!_0x41845c){const _0x513e73=await this[_0x4aa665(0x14e)][_0x4aa665(0x180)](_0x3f7f72,_0x4aa665(0x179));return _0x212c56[_0x4aa665(0x18c)](0xc8)[_0x4aa665(0x173)](_0x513e73);}if(_0x41845c['includes']('/')){this[_0x4aa665(0x14e)][_0x4aa665(0x17b)](_0x3f7f72[_0x4aa665(0x178)][0x0],_0x41845c);const _0x3364ab=await this[_0x4aa665(0x14e)][_0x4aa665(0x180)](_0x3f7f72,'officialBindAccountText');return _0x212c56['status'](0xc8)[_0x4aa665(0x173)](_0x3364ab);}this[_0x4aa665(0x14e)]['scan'](_0x3f7f72['fromusername'][0x0],_0x41845c);const _0x42d7be=await this[_0x4aa665(0x14e)][_0x4aa665(0x180)](_0x3f7f72,_0x4aa665(0x179));return _0x212c56['status'](0xc8)['send'](_0x42d7be);}if(_0x3f7f72[_0x4aa665(0x147)][0x0]==_0x4aa665(0x16e))return _0x212c56['status'](0xc8)['send']('');}if(_0x3f7f72[_0x4aa665(0x14a)][0x0]=='text'){const _0x21a315=await this[_0x4aa665(0x14e)][_0x4aa665(0x156)](_0x3f7f72[_0x4aa665(0x167)][0x0]),_0x4d9ce3=await this[_0x4aa665(0x14e)][_0x4aa665(0x158)](_0x3f7f72,_0x21a315);return _0x212c56[_0x4aa665(0x18c)](0xc8)[_0x4aa665(0x173)](_0x4d9ce3);}return _0x4aa665(0x13c);}async[_0x309acb(0x145)](_0x3b30a8){const _0xb24750=_0x309acb;return this[_0xb24750(0x14e)][_0xb24750(0x145)](_0x3b30a8);}async[_0x309acb(0x16a)](_0x3603a3){const _0x398fb1=_0x309acb;return this[_0x398fb1(0x14e)][_0x398fb1(0x16a)](_0x3603a3);}async[_0x309acb(0x18e)](_0x2e062d){const _0x31b66b=_0x309acb;if(process['env'][_0x31b66b(0x171)]===_0x31b66b(0x184))return'';const _0x5c4a50=await this['officialService'][_0x31b66b(0x137)](_0x2e062d['sceneStr']);return'https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket='+encodeURIComponent(_0x5c4a50);}async[_0x309acb(0x13a)](_0x5581dd,_0x35c4e9){const _0x1f4ebd=_0x309acb;return this[_0x1f4ebd(0x14e)][_0x1f4ebd(0x13a)](_0x5581dd,_0x35c4e9['sceneStr']);}async['bindWxBySceneStr'](_0x204bbe,_0x3cef3e){const _0x51ba3b=_0x309acb;return this[_0x51ba3b(0x14e)][_0x51ba3b(0x16d)](_0x204bbe,_0x3cef3e[_0x51ba3b(0x154)]);}async['getRedirectUrl'](_0x3c3e9f){const _0x2541e9=_0x309acb;return this[_0x2541e9(0x14e)][_0x2541e9(0x15a)](_0x3c3e9f[_0x2541e9(0x153)]);}async['getJsapiTicket'](_0x3cd99b){const _0x103c22=_0x309acb;return this[_0x103c22(0x14e)][_0x103c22(0x187)](_0x3cd99b[_0x103c22(0x153)]);}async[_0x309acb(0x13b)](_0x404879,_0x21134a){const _0x125519=_0x309acb;return this[_0x125519(0x14e)][_0x125519(0x13b)](_0x404879,_0x21134a[_0x125519(0x181)]);}};__decorate([(0x0,common_1[_0x309acb(0x18a)])('notify'),(0x0,swagger_1[_0x309acb(0x166)])({'summary':'公众号通知接口GET'}),__param(0x0,(0x0,common_1[_0x309acb(0x141)])()),__param(0x1,(0x0,common_1[_0x309acb(0x189)])()),__param(0x2,(0x0,common_1[_0x309acb(0x176)])()),__metadata(_0x309acb(0x15f),Function),__metadata(_0x309acb(0x142),[Object,Object,Object]),__metadata(_0x309acb(0x182),Promise)],OfficialController[_0x309acb(0x160)],_0x309acb(0x183),null),__decorate([(0x0,common_1[_0x309acb(0x18f)])(_0x309acb(0x183)),(0x0,swagger_1[_0x309acb(0x166)])({'summary':_0x309acb(0x177)}),__param(0x0,(0x0,common_1[_0x309acb(0x141)])()),__param(0x1,(0x0,common_1['Query'])()),__param(0x2,(0x0,common_1['Body'])()),__param(0x3,(0x0,common_1[_0x309acb(0x13d)])()),__metadata(_0x309acb(0x15f),Function),__metadata('design:paramtypes',[Object,Object,Object,Object]),__metadata(_0x309acb(0x182),Promise)],OfficialController[_0x309acb(0x160)],'notifyPost',null),__decorate([(0x0,common_1['Post'])(_0x309acb(0x145)),(0x0,swagger_1['ApiOperation'])({'summary':_0x309acb(0x192)}),__param(0x0,(0x0,common_1[_0x309acb(0x176)])()),__metadata(_0x309acb(0x15f),Function),__metadata(_0x309acb(0x142),[getQrSceneStr_dto_1['GetQrSceneStrDto']]),__metadata(_0x309acb(0x182),Promise)],OfficialController[_0x309acb(0x160)],_0x309acb(0x145),null),__decorate([(0x0,common_1[_0x309acb(0x18f)])(_0x309acb(0x16a)),(0x0,swagger_1[_0x309acb(0x166)])({'summary':'获取绑定二维码的sceneStr'}),(0x0,common_1[_0x309acb(0x170)])(jwtAuth_guard_1[_0x309acb(0x17f)]),__param(0x0,(0x0,common_1[_0x309acb(0x141)])()),__metadata('design:type',Function),__metadata(_0x309acb(0x142),[Object]),__metadata(_0x309acb(0x182),Promise)],OfficialController['prototype'],_0x309acb(0x16a),null),__decorate([(0x0,common_1['Get'])('getQRCode'),(0x0,swagger_1[_0x309acb(0x166)])({'summary':_0x309acb(0x155)}),__param(0x0,(0x0,common_1[_0x309acb(0x189)])()),__metadata(_0x309acb(0x15f),Function),__metadata('design:paramtypes',[getQrCode_dto_1[_0x309acb(0x140)]]),__metadata(_0x309acb(0x182),Promise)],OfficialController[_0x309acb(0x160)],_0x309acb(0x18e),null),__decorate([(0x0,common_1[_0x309acb(0x18f)])('loginBySceneStr'),(0x0,swagger_1[_0x309acb(0x166)])({'summary':_0x309acb(0x162)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x309acb(0x176)])()),__metadata(_0x309acb(0x15f),Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0x309acb(0x182),Promise)],OfficialController[_0x309acb(0x160)],'loginBySceneStr',null),__decorate([(0x0,common_1[_0x309acb(0x18f)])(_0x309acb(0x16d)),(0x0,swagger_1[_0x309acb(0x166)])({'summary':'扫码绑定轮询查询'}),(0x0,common_1[_0x309acb(0x170)])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x309acb(0x176)])()),__metadata(_0x309acb(0x15f),Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1[_0x309acb(0x140)]]),__metadata(_0x309acb(0x182),Promise)],OfficialController['prototype'],_0x309acb(0x16d),null),__decorate([(0x0,common_1[_0x309acb(0x18f)])(_0x309acb(0x15a)),(0x0,swagger_1[_0x309acb(0x166)])({'summary':_0x309acb(0x146)}),__param(0x0,(0x0,common_1[_0x309acb(0x176)])()),__metadata(_0x309acb(0x15f),Function),__metadata(_0x309acb(0x142),[Object]),__metadata('design:returntype',Promise)],OfficialController['prototype'],_0x309acb(0x15a),null),__decorate([(0x0,common_1[_0x309acb(0x18f)])(_0x309acb(0x187)),(0x0,swagger_1[_0x309acb(0x166)])({'summary':'获取注册配置'}),__param(0x0,(0x0,common_1[_0x309acb(0x176)])()),__metadata(_0x309acb(0x15f),Function),__metadata(_0x309acb(0x142),[Object]),__metadata(_0x309acb(0x182),Promise)],OfficialController[_0x309acb(0x160)],'getJsapiTicket',null),__decorate([(0x0,common_1[_0x309acb(0x18f)])(_0x309acb(0x13b)),(0x0,swagger_1[_0x309acb(0x166)])({'summary':_0x309acb(0x14c)}),__param(0x0,(0x0,common_1[_0x309acb(0x141)])()),__param(0x1,(0x0,common_1[_0x309acb(0x176)])()),__metadata(_0x309acb(0x15f),Function),__metadata(_0x309acb(0x142),[Object,Object]),__metadata(_0x309acb(0x182),Promise)],OfficialController[_0x309acb(0x160)],'loginByCode',null),OfficialController=__decorate([(0x0,swagger_1[_0x309acb(0x139)])(_0x309acb(0x16c)),(0x0,common_1[_0x309acb(0x168)])('official'),__metadata('design:paramtypes',[official_service_1[_0x309acb(0x13e)]])],OfficialController),exports[_0x309acb(0x163)]=OfficialController;function _0x5294(){const _0x1e0a26=['getJsapiTicket','echostr','Query','Get','__esModule','status','sceneStr:\x20','getQRCode','Post','length','xml:\x20','获取登录二维码sceneStr','getQRCodeTicket','split','ApiTags','loginBySceneStr','loginByCode','success','Res','OfficialService','./official.service','GetQrCodeDto','Req','design:paramtypes','verify','defineProperty','getQRSceneStr','获取登录跳转地址','event','8390584uvLsWd','VIEW','msgtype','object','公众号静默登录','signature','officialService','notifyPost','scan','../../common/auth/jwtAuth.guard','includes','url','sceneStr','获取二维码','aotoPlay','timestamp','genXmlMsg','decorate','getRedirectUrl','officialScanLoginText','1348526kOnQtb','officialBindAccountText','__decorate','design:type','prototype','__param','扫码登录轮询查询','OfficialController','./dto/getQrCode.dto','4382643gQcIdc','ApiOperation','content','Controller','subscribe','getQRSceneStrByBind','log','official','bindWxBySceneStr','unsubscribe','59320bJGJwR','UseGuards','ISDEV','1392601mtzXnS','send','388zBfLTA','nonce','Body','公众号通知接口POST','fromusername','officialSubscribeText','374808UUmLqV','scanBindWx','./dto/getQrSceneStr.dto','6qssSQS','eventkey','JwtAuthGuard','genXmlMsgByConfig','code','design:returntype','notify','TRUE','function','8455203LahTjh'];_0x5294=function(){return _0x1e0a26;};return _0x5294();}