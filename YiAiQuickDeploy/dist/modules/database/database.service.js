'use strict';const _0x3f0aff=_0x13f1;(function(_0x1cd5ef,_0x1eb5c4){const _0x31ebaa=_0x13f1,_0xdf437d=_0x1cd5ef();while(!![]){try{const _0x59bac9=-parseInt(_0x31ebaa(0x1a6))/0x1*(-parseInt(_0x31ebaa(0x196))/0x2)+parseInt(_0x31ebaa(0x1ae))/0x3*(parseInt(_0x31ebaa(0x1b3))/0x4)+-parseInt(_0x31ebaa(0x1b1))/0x5*(-parseInt(_0x31ebaa(0x1d0))/0x6)+parseInt(_0x31ebaa(0x17d))/0x7*(parseInt(_0x31ebaa(0x19b))/0x8)+-parseInt(_0x31ebaa(0x1d2))/0x9+-parseInt(_0x31ebaa(0x19c))/0xa*(-parseInt(_0x31ebaa(0x182))/0xb)+-parseInt(_0x31ebaa(0x186))/0xc;if(_0x59bac9===_0x1eb5c4)break;else _0xdf437d['push'](_0xdf437d['shift']());}catch(_0x27918a){_0xdf437d['push'](_0xdf437d['shift']());}}}(_0x1647,0xdd85e));var __decorate=this&&this['__decorate']||function(_0x3fce62,_0x175628,_0x1d8866,_0x319185){const _0x5357ff=_0x13f1;var _0x556429=arguments[_0x5357ff(0x1c5)],_0x404d20=_0x556429<0x3?_0x175628:_0x319185===null?_0x319185=Object[_0x5357ff(0x18f)](_0x175628,_0x1d8866):_0x319185,_0x3ca7d6;if(typeof Reflect===_0x5357ff(0x188)&&typeof Reflect['decorate']===_0x5357ff(0x1a1))_0x404d20=Reflect['decorate'](_0x3fce62,_0x175628,_0x1d8866,_0x319185);else{for(var _0x2fbab7=_0x3fce62[_0x5357ff(0x1c5)]-0x1;_0x2fbab7>=0x0;_0x2fbab7--)if(_0x3ca7d6=_0x3fce62[_0x2fbab7])_0x404d20=(_0x556429<0x3?_0x3ca7d6(_0x404d20):_0x556429>0x3?_0x3ca7d6(_0x175628,_0x1d8866,_0x404d20):_0x3ca7d6(_0x175628,_0x1d8866))||_0x404d20;}return _0x556429>0x3&&_0x404d20&&Object['defineProperty'](_0x175628,_0x1d8866,_0x404d20),_0x404d20;},__metadata=this&&this['__metadata']||function(_0x39a3d6,_0x30de8a){const _0x176de1=_0x13f1;if(typeof Reflect===_0x176de1(0x188)&&typeof Reflect[_0x176de1(0x1b4)]==='function')return Reflect[_0x176de1(0x1b4)](_0x39a3d6,_0x30de8a);};Object[_0x3f0aff(0x1a0)](exports,_0x3f0aff(0x1c1),{'value':!![]}),exports['DatabaseService']=void 0x0;const common_1=require(_0x3f0aff(0x17c)),typeorm_1=require('typeorm'),bcrypt=require(_0x3f0aff(0x1b7));let DatabaseService=class DatabaseService{constructor(_0x34f439){const _0x4ca3b2=_0x3f0aff;this[_0x4ca3b2(0x194)]=_0x34f439;}async[_0x3f0aff(0x17a)](){const _0x28cd23=_0x3f0aff;await this[_0x28cd23(0x17e)](),await this[_0x28cd23(0x1b0)]();}async[_0x3f0aff(0x17e)](){const _0x228023=_0x3f0aff,_0x4fba3f=await this['connection'][_0x228023(0x1ac)](_0x228023(0x19d));if(!_0x4fba3f||_0x4fba3f[_0x228023(0x1c5)]===0x0){const _0x3885b6=bcrypt[_0x228023(0x1a4)](_0x228023(0x179),0xa),_0x5c9538=bcrypt['hashSync'](_0x228023(0x179),0xa),_0x290963=_0x228023(0x189),_0x2d893b=_0x228023(0x184),_0x17359a={'username':_0x228023(0x1af),'password':_0x3885b6,'status':0x1,'email':_0x290963,'sex':0x1,'role':_0x228023(0x1af)},_0x36908c={'username':_0x228023(0x1cf),'password':_0x5c9538,'status':0x1,'email':_0x2d893b,'sex':0x1,'role':_0x228023(0x1cf)};await this[_0x228023(0x1b8)](_0x17359a),await this['createDefaultUser'](_0x36908c);}}async[_0x3f0aff(0x1b8)](_0xa8cf91){const _0x5f42da=_0x3f0aff;try{const {username:_0x193c87,password:_0x1e9d70,status:_0x1cffe9,email:_0x4be637,role:_0x3750e0}=_0xa8cf91,_0x242524=await this[_0x5f42da(0x194)][_0x5f42da(0x1ac)](_0x5f42da(0x193)+_0x193c87+_0x5f42da(0x195)+_0x1e9d70+_0x5f42da(0x195)+_0x1cffe9+_0x5f42da(0x195)+_0x4be637+_0x5f42da(0x195)+_0x3750e0+'\x27)'),_0x3262e5=_0x242524[_0x5f42da(0x1d1)],_0x40533a=await this['connection'][_0x5f42da(0x1ac)](_0x5f42da(0x1a3)+_0x3262e5+_0x5f42da(0x177));common_1[_0x5f42da(0x1c4)]['log'](_0x5f42da(0x175)+_0x3750e0+'用户成功、用户名为['+_0x193c87+']、初始密码为['+(_0x193c87===_0x5f42da(0x1af)?'nine-super':_0x5f42da(0x179))+']\x20==============>\x20请注意查阅',_0x5f42da(0x17f));}catch(_0xee25c2){console[_0x5f42da(0x18c)](_0x5f42da(0x1c7),_0xee25c2);throw new common_1['HttpException']('创建默认超级管理员失败！',common_1[_0x5f42da(0x187)]['INTERNAL_SERVER_ERROR']);}}async[_0x3f0aff(0x1b0)](){const _0x411201=_0x3f0aff,_0x541527=[_0x411201(0x1b5),'qqNumber',_0x411201(0x185),_0x411201(0x1bf),'userDefautlAvatar'],_0x455264=await this[_0x411201(0x194)]['query']('\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20('+_0x541527[_0x411201(0x1d6)](_0x487e2e=>'\x27'+_0x487e2e+'\x27')[_0x411201(0x197)](',')+')\x0a'),_0x2b0482=parseInt(_0x455264[0x0][_0x411201(0x1d3)]);_0x2b0482===0x0&&await this[_0x411201(0x1d5)]();}async[_0x3f0aff(0x1d5)](){const _0x229dcd=_0x3f0aff;try{const _0x901565='',_0x1138a3=_0x229dcd(0x178),_0xfeb3e5=[{'configKey':'siteName','configVal':_0x229dcd(0x1b2),'public':0x1,'encry':0x0},{'configKey':'qqNumber','configVal':_0x229dcd(0x198),'public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x185),'configVal':_0x229dcd(0x18e),'public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1bf),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x191),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x1be),'configVal':_0x901565,'public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x199),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x1a5),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x1bb),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1c0),'configVal':_0x229dcd(0x1ba),'public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x17b),'configVal':_0x1138a3,'public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1d4),'configVal':_0x229dcd(0x1c2),'public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x18b),'configVal':_0x229dcd(0x1bd),'public':0x0,'encry':0x0},{'configKey':'registerVerifyEmailFrom','configVal':'Yi\x20Ai团队','public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x1ab),'configVal':_0x229dcd(0x190),'public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x1ce),'configVal':_0x229dcd(0x1c8),'public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x1a2),'configVal':_0x229dcd(0x1b2),'public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x19f),'configVal':_0x229dcd(0x18d),'public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x1b6),'configVal':'Yi\x20Ai账号激活失败','public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x18a),'configVal':_0x229dcd(0x1ad),'public':0x0,'encry':0x0},{'configKey':_0x229dcd(0x183),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x181),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1cb),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'registerSendDrawMjCount','configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1c3),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1cd),'configVal':_0x229dcd(0x1b9),'public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1aa),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1d7),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x192),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1a8),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x176),'configVal':'0','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendDrawMjCount','configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1ca),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x180),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1bc),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x229dcd(0x1cc),'configVal':'1','public':0x1,'encry':0x0}],_0x1e6470=await this['connection'][_0x229dcd(0x1ac)](_0x229dcd(0x1c9)+_0xfeb3e5[_0x229dcd(0x1d6)](_0x11a98e=>'(\x27'+_0x11a98e['configKey']+'\x27,\x20\x27'+_0x11a98e['configVal'][_0x229dcd(0x19e)](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x11a98e[_0x229dcd(0x1c6)]+'\x27,\x20\x27'+_0x11a98e['encry']+'\x27)')['join'](',\x20'));common_1['Logger'][_0x229dcd(0x18c)](_0x229dcd(0x19a),'DatabaseService');}catch(_0x1f3682){console[_0x229dcd(0x18c)]('error:\x20',_0x1f3682);throw new common_1[(_0x229dcd(0x1a9))](_0x229dcd(0x1a7),common_1['HttpStatus'][_0x229dcd(0x1d8)]);}}};function _0x1647(){const _0x3020a4=['defaultAdmin@cooper.com','vxNumber','11959728ikYJCM','HttpStatus','object','default@cooper.com','registerFailEmailTeamName','registerVerifyEmailDesc','log',',请妥善保管您的账号，祝您使用愉快','HelloWordYi819','getOwnPropertyDescriptor','1800','userDefautlAvatar','inviteSendStatus','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','connection','\x27,\x20\x27','198bPzXni','join','805239273','baiduSiteId','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','136JYpspD','40qvYFri','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','replace','registerSuccessEmaileAppend','defineProperty','function','registerSuccessEmailTeamName','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','hashSync','baiduToken','6827ycjiqT','创建默认网站配置失败！','inviteGiveSendModel3Count','HttpException','firstRregisterSendModel4Count','registerVerifyExpir','query','Yi\x20Ai团队','15sLAPwh','super','checkSiteBaseConfig','1810qNMwSK','Yi\x20Ai','616732hHUbKX','metadata','siteName','registerFailEmailTitle','bcryptjs','createDefaultUser','500','https://api.openai.com','buyCramiAddress','invitedGuestSendDrawMjCount','欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','baiduCode','robotAvatar','openaiBaseUrl','__esModule','Yi\x20Ai团队账号验证','firstRegisterSendStatus','Logger','length','public','error:\x20','Yi\x20Ai账号激活成功','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','invitedGuestSendModel3Count','registerSendModel4Count','isVerifyEmail','firstRegisterSendRank','registerSuccessEmailTitle','admin','29166mZvdMN','insertId','12704679qccAKe','count','registerVerifyEmailTitle','createBaseSiteConfig','map','firstRregisterSendDrawMjCount','INTERNAL_SERVER_ERROR','初始化创建','inviteGiveSendModel4Count','\x27,\x200,\x201000,\x20100)','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','123456','onModuleInit','noticeInfo','@nestjs/common','19509NPqwXL','checkSuperAdmin','DatabaseService','invitedGuestSendModel4Count','registerSendModel3Count','169906GGeczd','registerSendStatus'];_0x1647=function(){return _0x3020a4;};return _0x1647();}function _0x13f1(_0x12285f,_0x27f8fb){const _0x1647fc=_0x1647();return _0x13f1=function(_0x13f1b2,_0x32de32){_0x13f1b2=_0x13f1b2-0x175;let _0x1bf8f0=_0x1647fc[_0x13f1b2];return _0x1bf8f0;},_0x13f1(_0x12285f,_0x27f8fb);}DatabaseService=__decorate([(0x0,common_1['Injectable'])(),__metadata('design:paramtypes',[typeorm_1['Connection']])],DatabaseService),exports[_0x3f0aff(0x17f)]=DatabaseService;